1. lock表和paxos合起来能够支持事务功能，能够支持一个paxos group

2. tablet在colossus中的结构是 B-tree-like 文件 和 write ahead log

3. wound wait当事务Ti请求当前由Tj持有的数据项时，允许Ti仅在其时间戳大于Tj的时间戳时等待，否则Tj被回滚（Tj受到Ti的伤害）

4. Spanner里的另一种事务就是只读事务，用Snapshot Isolation的方式来执行。

   这个事务的关键在于如何选择一个 s_read，满足外部一致性的要求。最简单的做法，用TT.Now().latest，能满足要求，但是可能会发生阻塞。阻塞有两种来源，一个是并发事务的读写冲突，另一个是复制协议的复制延迟。

   读写冲突造成的阻塞：如果只读事务遇到一个正在Prepare但是没有Commit的事务，是否能读它的数据呢，如果读了，那有可能发生脏读，如果不读选择忽略，就会违背可重复读的原则（后续事务提交后读事务就可以读到数据了）。因此，这时候只能选择等待。

   复制协议造成的阻塞：在Leader已经完成了2PC commit的paxos write之后，follower没有收到这个2PC commit，此时也不能读到最新的数据。

   因此，只读事务首先需要选择一个合适的时间戳，然后在相应的节点确认不会发生读写冲突、不会有复制协议的落后的情况下，可以处理这个读请求了。